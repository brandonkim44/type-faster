!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timer=n,this.moveDivInterval=null,this.pos=0,this.text=t,this.chars=this.text.split(""),this._currentDiv=this._currentDiv.bind(this),this.displayDiv=this.displayDiv.bind(this),this.checkWord=this.checkWord.bind(this),this.moveDiv=this.moveDiv.bind(this),this.listenForLose=this.listenForLose.bind(this),this.stopDiv=this.stopDiv.bind(this),this.isGameOver=this.isGameOver.bind(this),this.displayWin=this.displayWin.bind(this),this.calcAcc=this.calcAcc,this.calcWPM=this.calcWPM,this.checkEdgeCases=this.checkEdgeCases}var t,n,i;return t=e,(n=[{key:"_currentDiv",value:function(){var e=document.getElementById("current");this.charsSpans=this.chars.map((function(t){var n=document.createElement("span");return n.setAttribute("class","untyped"),n.innerText=t,e.appendChild(n),n}))}},{key:"checkWord",value:function(){var e=this,t=0,n=0,r=0,i=function(i){i.preventDefault();var s=e.charsSpans[t],a=s.innerText,c=document.getElementsByClassName("untyped"),o=document.getElementsByClassName("correct"),l=document.getElementsByClassName("incorrect"),u=o.length-1,d=l.length-1;if(i.key===a||e.checkEdgeCases(i.key,a)){if(t>0){var h=e.charsSpans[t-1];"correct"===h.className&&(o[u].style.borderRight="unset"),"incorrect"===h.className&&(l[d].style.borderRight="unset")}c[1].style.borderRight="1px solid black",s.setAttribute("class","correct"),s.dataset.incorrect&&s.removeAttribute("data-incorrect"),r++,n++,t++}else if(8===i.keyCode)t>0&&((s=e.charsSpans[t-1]).style.borderRight="unset",t>1&&(e.charsSpans[t-2].style.borderRight="1px solid black"),s.setAttribute("class","untyped"),t--);else{if(i.shiftKey)return null;if(i.key!==a){if(t>0){var m=e.charsSpans[t-1];"correct"===m.className&&(o[u].style.borderRight="unset"),"incorrect"===m.className&&(l[d].style.borderRight="unset")}c[1].style.borderRight="1px solid black",s.setAttribute("class","incorrect"),s.setAttribute("data-incorrect","true"),r++,t++}}e.calcAcc(r,n),e.calcWPM(r,0),e.isGameOver()&&(e.stopDiv(),e.displayWin())};this.checkCharacter=i,document.addEventListener("keydown",i)}},{key:"displayDiv",value:function(){this._currentDiv(),this.checkWord()}},{key:"moveDiv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pos;this.moveDivInterval=setInterval(r,e);var n=this;function r(){t+=.1,n.pos=t,document.getElementById("current").style.bottom=t+"%",n.listenForLose()}}},{key:"stopDiv",value:function(){clearInterval(this.moveDivInterval)}},{key:"listenForLose",value:function(){var e=document.getElementsByClassName("incorrect"),t=document.getElementsByClassName("untyped")[1],n=null;e.length>0&&(n=e[0].getBoundingClientRect().top+10);var r=t.getBoundingClientRect().top+10;(n<0||r<=0)&&(document.removeEventListener("keydown",this.checkCharacter),document.querySelector(".end-modal").style.display="flex",this.stopDiv(),this.timer.stopTimer(),document.querySelector(".play-again").addEventListener("click",(function(){window.location.reload()})))}},{key:"calcWPM",value:function(e,t){var n=0;document.querySelectorAll("[data-incorrect]")&&(t=document.querySelectorAll("[data-incorrect]").length);var r=document.getElementById("timer").dataset.time;(n=Math.round((e/5-t)/parseFloat(r)))<0&&(n=0),document.getElementById("wpm").innerText="WPM: "+n.toString(),document.getElementById("final-wpm").innerText="Final WPM: "+n.toString()}},{key:"calcAcc",value:function(e,t){var n=0;0!==e&&(n=(t/e*100).toFixed(2)),document.querySelector(".accuracy").innerHTML="Accuracy: "+n.toString()+"%"}},{key:"isGameOver",value:function(){return document.getElementsByClassName("untyped").length<=1}},{key:"displayWin",value:function(){document.removeEventListener("keydown",this.checkCharacter),document.querySelector(".end-modal").style.display="flex",this.timer.stopTimer(),document.querySelector(".play-again").addEventListener("click",(function(){window.location.reload()}))}},{key:"checkEdgeCases",value:function(e,t){return!!("-"===e&&"—"===currentCharacter||"a"===e&&["À","à","Á","á","Ã","ã","Ä","ä"].includes(t)||"e"===e&&["È","è","É","é","Ê","ê","Ë","ë"].includes(t)||"i"===e&&["Ì","ì","Í","í","Î","î","Ï","ï"].includes(t)||"o"===e&&["Ò","ò","Ó","ó","Ô","ô","Õ","õ","Ö","ö"].includes(t)||"u"===e&&["Ù","ù","Ú","ú","Û","û","Ü","ü"].includes(t)||"n"===e&&["Ñ","ñ"].includes(t))}}])&&r(t.prototype,n),i&&r(t,i),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timerInterval=null,this.startTime=(new Date).getTime(),this.timer=document.getElementById("timer"),this.startTimer=this.startTimer.bind(this),this.printTime=this.printTime.bind(this),this.updateTime=this.updateTime.bind(this),this.stopTimer=this.stopTimer.bind(this),this.addTime=this.addTime.bind(this),this.stopped=!1,this.offset=0}var t,n,r;return t=e,(n=[{key:"startTimer",value:function(){this.stopped=!1,this.startTime=(new Date).getTime(),this.timerInterval=setInterval(this.addTime,50)}},{key:"addTime",value:function(){var e=0,t=0,n=0,r=0,i=0;if(!this.stopped){var s=(new Date).getTime(),a=this.offset+(s-this.startTime);e=a%1e3,(t=parseInt(a/1e3))>=3600&&(r=Math.trunc(t/3600),t%=3600),t>=60&&(n=Math.trunc(t/60),t%=60),i=parseFloat(t/60)+parseInt(n)+parseInt(60*r),this.printTime(t,n,r,e),this.updateTime(i)}}},{key:"printTime",value:function(e,t,n,r){this.timer.innerHTML=(n?n>9?n:"0"+n:"00")+":"+(t?t>9?t:"0"+t:"00")+":"+(e>9?e:"0"+e)+":"+r}},{key:"updateTime",value:function(e){this.timer.dataset.time=e}},{key:"stopTimer",value:function(){this.stopped=!0,this.offset+=(new Date).getTime()-this.startTime}}])&&s(t.prototype,n),r&&s(t,r),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n,r,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stopDiv=t,this.stopTimer=n,this.moveDiv=r,this.checkCharacter=i,this.startTimer=s,this.openMenu=this.openMenu.bind(this),this.resume=this.resume.bind(this),this.restart=this.restart.bind(this),this.resume(),this.restart()}var t,n,r;return t=e,(n=[{key:"openMenu",value:function(){var e=this;document.querySelector(".menu").addEventListener("click",(function(){document.querySelector(".menu-modal").style.display="flex",e.stopDiv(),e.stopTimer(),document.removeEventListener("keydown",e.checkCharacter)}))}},{key:"resume",value:function(){var e=this;document.querySelector(".resume").addEventListener("click",(function(){var t=document.querySelector(".start-button");document.querySelector(".menu-modal").style.display="none";var n=parseInt(t.dataset.selectedwpm);e.moveDiv(n),e.startTimer(),document.addEventListener("keydown",e.checkCharacter)}))}},{key:"restart",value:function(){document.querySelector(".restart").addEventListener("click",(function(){window.location.reload()}))}}])&&c(t.prototype,n),r&&c(t,r),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentRes=t,this.selectedWPM=n,this.createText=this.createText.bind(this),this.createTimer=this.createTimer.bind(this),this.createMenuModal=this.createMenuModal.bind(this),this.createTimer(),this.createText(),this.createMenuModal()}var t,n,r;return t=e,(n=[{key:"createTimer",value:function(){var e=new a;this.timer=e,e.startTimer(),this.stopTimer=e.stopTimer,this.startTimer=e.startTimer}},{key:"createText",value:function(){var e=new i(this.contentRes,this.timer);e.displayDiv(),e.moveDiv(this.selectedWPM),this.stopDiv=e.stopDiv,this.moveDiv=e.moveDiv,this.checkCharacter=e.checkCharacter}},{key:"createMenuModal",value:function(){new o(this.stopDiv,this.stopTimer,this.moveDiv,this.checkCharacter,this.startTimer).openMenu()}}])&&l(t.prototype,n),r&&l(t,r),e}();function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectSpeed=this.selectSpeed.bind(this),this.startGame=this.startGame.bind(this)}var t,n,r;return t=e,(n=[{key:"selectSpeed",value:function(){for(var e=document.getElementsByClassName("speed"),t=document.querySelector(".start-button"),n=0;n<e.length;n++)e[n].addEventListener("click",(function(e){for(var n=document.querySelectorAll("[data-wpm]"),r=0;r<n.length;r++)n[r].setAttribute("class","speed");e.currentTarget.setAttribute("class","selected-speed"),t.dataset.selectedwpm=e.currentTarget.dataset.wpm}))}},{key:"startGame",value:function(){var e=document.querySelector(".start-button");e.addEventListener("click",(function(t){t.preventDefault();var n=document.getElementById("input-field").value,r=parseInt(e.dataset.selectedwpm);Number.isInteger(r)||(document.querySelector(".speed-error").style.display="unset"),n.length<=1&&(document.querySelector(".field-error").style.display="unset"),Number.isInteger(r)&&n.length>1&&(document.querySelector(".hidden-splash-bg").setAttribute("class","splash-bg"),document.querySelector(".waiting-comic").style.display="unset",fetch("../../.netlify/functions/loadText?topic=".concat(n,"&selectedWPM=").concat(r),{}).then(m).then((function(e){return console.log(e),e.json()})).then((function(e){var t=e.articles.length,n=Math.floor(Math.random()*t+1),r=e.articles[n],i="";r&&(i=r.url);var s="https://lexper.p.rapidapi.com/v1.1/extract?media=1&url=".concat(i);return fetch("../../.netlify/functions/extractArticle?url=".concat(encodeURIComponent(s)),{})})).then(m).then((function(e){return console.log(e),e.json()})).then(m).then((function(e){console.log(e);var t=e.article.author,n=e.article.title,i=e.article.text;document.querySelector(".author").innerText=t,document.querySelector(".title").innerText=n,document.querySelector(".start-modal").style.display="none",document.querySelector(".author-header").style.display="flex",document.querySelector(".title-header").style.display="flex",document.querySelector(".author").style.display="flex",document.querySelector(".title").style.display="flex",document.querySelector(".timer").style.display="flex",document.querySelector(".menu").style.display="flex",new u(i,r),document.querySelector(".splash-bg")&&document.querySelector(".splash-bg").setAttribute("class","hidden-splash-bg")})))}))}}])&&d(t.prototype,n),r&&d(t,r),e}();function m(e){if(console.log(e),!e.ok){document.querySelector(".splash-bg")&&document.querySelector(".splash-bg").setAttribute("class","hidden-splash-bg");var t=e.statusText;throw alert("API Request Failed. Please try again!"),Error(t)}if(e.errors){document.querySelector(".splash-bg")&&document.querySelector(".splash-bg").setAttribute("class","hidden-splash-bg");var n=e.message;throw alert("API Request Failed. Please try again!"),Error(n)}return e}document.addEventListener("DOMContentLoaded",(function(){var e=new h;e.selectSpeed(),e.startGame(),setTimeout((function(){document.querySelector(".splash-bg").setAttribute("class","hidden-splash-bg")}),1e3)}))}]);
//# sourceMappingURL=main.js.map